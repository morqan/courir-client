var directionsDisplay,map,autocomplete_start,autocomplete_end,place_start,place_end,marker,directionsService=new google.maps.DirectionsService;function initialize(){directionsDisplay=new google.maps.DirectionsRenderer;var e=new google.maps.LatLng(40.409264,49.867092),t={zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,center:e};map=new google.maps.Map(document.getElementById("map_canvas"),t),directionsDisplay.setMap(map),directionsDisplay.setPanel(document.getElementById("directionsPanel"));var a=document.getElementById("startPlace"),o=document.getElementById("endPlace"),n={componentRestrictions:{country:"az"}};autocomplete_start=new google.maps.places.Autocomplete(a,n),google.maps.event.addListener(autocomplete_start,"place_changed",function(){place_start=autocomplete_start.getPlace()}),autocomplete_end=new google.maps.places.Autocomplete(o,n),google.maps.event.addListener(autocomplete_end,"place_changed",function(){place_end=autocomplete_end.getPlace()}),google.maps.event.addListener(map,"click",function(e){marker&&marker.setMap&&marker.setMap(null),marker=new google.maps.Marker({position:e.latLng,map:map}),(new google.maps.Geocoder).geocode({latLng:e.latLng},function(e,t){if(console.log(e,t),t==google.maps.GeocoderStatus.OK){console.log(e);var a=e[0].geometry.location.lat(),o=e[0].geometry.location.lng();e[0].address_components[0].long_name,new google.maps.LatLng(a,o);$("#startPlace").val(e[0].formatted_address)}})})}function calcRoute(){var e=document.getElementById("startPlace").value+", Baku, Azerbaijan",t=document.getElementById("endPlace").value+", Baku, Azerbaijan";void 0!==place_start&&(e=new google.maps.LatLng(place_start.geometry.location.lat(),place_start.geometry.location.lng()),console.log(place_start),console.log(e)),void 0!==place_end&&(t=new google.maps.LatLng(place_end.geometry.location.lat(),place_end.geometry.location.lng()),console.log(place_end),console.log(t));var a={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(a,function(e,t){if(t==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(e);var a=document.getElementById("price_for_selected"),o=e.routes[0].legs[0],n=o.distance.value/1e3;price=n<=3?2:n>3&&n<=12?.5*(n-3)+2:n>12&&n<=70?.4*(n-12)+2+4.5:.22*(n-70)+28;var l='<div class="alert alert-success" role="alert"> ';l+="<p>Mesafe: <td>"+o.distance.text,l+="<p>Teqribi vaxt: <td>"+o.duration.text,l+="<p>Qiymet: "+Math.ceil(price)+" AZN",l+="",a.innerHTML=l}else{l='<div class="alert alert-warning" role="alert"></div>';(a=document.getElementById("price_for_selected")).innerHTML=l,document.getElementById("directionsPanel").innerHTML=""}})}window.onload=initialize;